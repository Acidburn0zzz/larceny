Information about Petit Larceny on MacOS X
21 August 2003 / lth


HOW TO BUILD AND USE.

See HOWTO-PETIT for information about this, there are no surprises.

The dynamic loading facility implemented by COMPILE-FILES does not
work under MacOS X because the OS has an idiosyncratic dynamic loading
facility that I have not yet done anything to understand.  Compiled
code must be linked into the heap using the BUILD-APPLICATION
facility.  BUILD-TWOBIT works.


PERFORMANCE SKETCH (Larceny 0.50, fall 2002)

System:                    400MHz PowerBook G3, MacOS X 10.1.5
Jump discipline:           Trampoline with gotos for local labels
Compiled (fib 33):         2603ms, peephole opt. cuts this to 2435ms
Interpreted (fib 30):      9181ms
Compiled (even? 10000000): 2214ms (global functions even? and odd?), ie
                           about 5,000,000 function calls per second


TODO.

* Implement dynamic loading
* Implement the foreign function interface
* Implement polling input with select()
* Problems with mmap -- function exists but Larceny gets a failure, appears
  to need extra magic on this platform (problem experienced with 10.1.5)
* Performance investigation -- various jump disciplines, other
  build options.

