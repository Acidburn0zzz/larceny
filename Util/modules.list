; -*- scheme -*-
;
; $Id$
;
; Experimental setup for loading compiled systems into environments.
; Each form defines an environment in terms of parent environment, files
; to load, and values to import from other environments.  The 
; environments must form a DAG with respect to the parent/child relationship,
; and parents must come before children in the file.
; 
; The names @interaction-environment@ and @toplevel@ are magic.

'((environment auxiliary)
  (parent @interaction-environment@)
  (files "Auxlib/misc.fasl"
	 "Auxlib/list.fasl"
	 "Auxlib/string.fasl"
	 "Auxlib/vector.fasl"
	 "Auxlib/pp.fasl"
	 "Auxlib/io.fasl"
	 "Auxlib/osdep-unix.fasl"
	 "Auxlib/load.fasl"))

'((environment experimental)
  (parent auxiliary)
  (files "Experimental/apropos.fasl"
	 "Experimental/system-stuff.fasl"
	 "Experimental/applyhook0.fasl"
	 "Experimental/applyhook.fasl"))

'((environment debugger)
  (parent auxiliary)
  (files "Debugger/debug.fasl"
	 "Debugger/inspect-cont.fasl"
	 "Debugger/trace.fasl"))

`((environment compiler)
  (parent auxiliary)
  (files "Compat/Larceny/compat2.fasl"
	 ,@(nbuild:twobit-files)
	 ,@(nbuild:common-asm-files)
	 "Asm/Common/link-lop.fasl"
	 ,@(nbuild:machine-asm-files)
	 ,@(nbuild:utility-files)
	 "Util/make-support.fasl"
	 "Util/init-comp.fasl"))

'((environment @interaction-environment@)
  (imports (auxiliary scheme-system)
	   (auxiliary *pi*)
	   (auxiliary remq!)
	   (auxiliary remv!)
	   (auxiliary remove!)
	   (auxiliary aremq!)
	   (auxiliary aremv!)
	   (auxiliary aremove!)
	   (auxiliary filter)
	   (auxiliary find)
	   (auxiliary make-list)
	   (auxiliary reduce)
	   (auxiliary reduce-right)
	   (auxiliary fold-left)
	   (auxiliary fold-right)
	   (auxiliary vector-copy)
	   (auxiliary read-line)
	   (auxiliary sort)
	   (auxiliary sort!)
	   (auxiliary pretty-print)
	   (auxiliary pretty-line-length)
	   (auxiliary file-newer?)
	   (auxiliary read-line)
	   (auxiliary load)
	   (auxiliary load-noisily)
	   (auxiliary load-quietly)
	   ; System-level things
	   (experimental apropos)
	   (experimental object-representation)
	   (experimental object-size)
	   (experimental count-objects-in-heap)
	   (experimental gctwa)
	   (experimental room)
	   (experimental make-apply-hook)
	   (experimental apply-hook?)
	   (experimental apply-hook-procedure)
	   (experimental set-apply-hook-procedure!)
	   (experimental apply-hook-extra)
	   (experimental set-apply-hook-extra!)
	   ; Debugging
	   (debugger debug)
	   (debugger backtrace)
	   (debugger trace)
           (debugger trace-entry)
           (debugger trace-exit)
	   (debugger untrace)
           (debugger break-here)
	   (debugger break-entry)
	   (debugger unbreak)
	   ; Compilation
	   (compiler compile-file)
	   (compiler assemble-file)
	   (compiler compile-expression)
	   (compiler macro-expand-expression)
	   ; On-line help
	   (compiler help)
	   ; Disassembler
	   (compiler disassemble-codevector)
	   (compiler print-instructions)
	   (compiler disassemble-file)
	   (compiler disassemble)
	   ; Compiler and assembler switches
	   (compiler compiler-switches)
	   (compiler issue-warnings)
	   (compiler include-procedure-names)
	   (compiler include-source-code)
	   (compiler include-variable-names)
           (compiler single-stepping)
	   (compiler avoid-space-leaks)
	   (compiler write-barrier)
           (compiler runtime-safety-checking)
	   (compiler catch-undefined-globals)
	   (compiler integrate-usual-procedures)
           (compiler control-optimization)
	   (compiler parallel-assignment-optimization)
	   (compiler lambda-optimization)
	   (compiler benchmark-mode)
           (compiler benchmark-block-mode)
	   (compiler global-optimization)
           (compiler interprocedural-inlining)
           (compiler interprocedural-constant-propagation)
           (compiler common-subexpression-elimination)
           (compiler representation-inference)
	   (compiler local-optimization)
	   (compiler peephole-optimization)
	   (compiler inline-allocation)
	   (compiler fill-delay-slots)
	   ; Make utility
	   (compiler make:project)
	   (compiler make:new-project)
	   (compiler make:project?)
	   (compiler make:rule)
	   (compiler make:deps)
	   (compiler make:targets)
	   (compiler make:pretend)
	   (compiler make:debug)
	   (compiler make:make)))

; eof 
