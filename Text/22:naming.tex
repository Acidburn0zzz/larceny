\input{larceny.sty}
\title{Larceny Note \#22: \\
       Internal Naming Conventions}
\author{Lars Thomas Hansen}

\begin{document}
\maketitle

\section{Introduction}

This document describes the naming conventions to be followed by the public
procedures and data in the run-time system proper, i.e. in the sources for
what eventually becomes the executable, as opposed to within the libraries.
The naming conventions are important both for the sake of clarity (there are
getting to be a lot of public procedures and some public data) and also
because following these conventions it will be easier to make Larceny a part
of a larger system at a later stage, using it as an embedded Language.

\section{Conventions}

The public names in the run-time system can be classified into the following
groups:

\begin{itemize}
\item
Global data objects like the globals and millicode procedure tables.

\item 
Millicode procedures which are in millicode because they are too big to
have in-line, like generic arithmetic, or which are in millicode because
they do not have to be fast, like typetag operations.

\item
Millicode procedures which are fundamental parts of the runtime system,
like allocation and transaction-recording assignment operations. These
procedures are almost always invoked from in-line code which does some
work before and/or after the call.

\item
C support procedures for millicode.

\item
C procedures which are part of the runtime system but which are not
directly called from the millicode.

\end{itemize}

The {\em only} global data objects are the globals and millicode tables.
These are called {\tt globals} and {\tt millicode}, respectively.

All millicode procedures which are part of the memory management system
have names with the prefix {\tt mem\_}. These procedures are all found
in the file ``Sparc/memory.s''.

All other millicode procedures have names with the prefix {\tt m\_}. These
procedures are all found in the files ``Sparc/glue.s'' and ``Sparc/generic.s''.

C procedures which are called from millicode have the prefix {\tt C\}.

\end{document}
